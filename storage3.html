<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Roman Numeral Challenge</title> 
</head>

<body>
    <h1>Roman Numeral Conversion</h1>
    <form>
        <label>Insert a roman numeral in the box and the equivilant number written in integer notation with be returned.</label><br><br>
        <input type="text" id="romAnswer" name="romAanswer"><br><br>
        <input type="submit" value="Submit" onclick="romanNum(document.getElementById('romAnswer').value)">
    </form><br>
    <form>
        <label>Insert a number written in integer notation in the box and the equivilant roman numeral with be returned.</label><br><br>
        <input type="text" id="numAnswer" name="numAnswer"><br><br>
        <input type="submit" value="Submit" onclick="regNum(document.getElementById('numAnswer').value)">
    </form>
    <script>
        function romanNum(answer) {
            let countI = (answer.match(/I/gi) || []).length;
            let countV = (answer.match(/V/gi) || []).length;
            let countX = (answer.match(/X/gi) || []).length;
            let countL = (answer.match(/L/gi) || []).length;
            let countC = (answer.match(/C/gi) || []).length;
            let countD = (answer.match(/D/gi) || []).length;
            let countM = (answer.match(/M/gi) || []).length;
            let countSum = countI * 1 + countV * 5 + countX * 10 + countL * 50 + countC * 100 + countD * 100 + countM * 1000;
            
            if (answer.indexOf('I') === answer.indexOf('V')-1 && (answer.includes('I') && answer.includes('V'))) {
                countSum -= 2;
            } 

            if (answer.indexOf('I') === answer.indexOf('X')-1 && (answer.includes('I') && answer.includes('X'))) {
                countSum -= 2;
            } 

            if (answer.indexOf('X') === answer.indexOf('C')-1 && (answer.includes('X') && answer.includes('C'))) {
                countSum -= 20;
            } 

            if (answer.indexOf('X') === answer.indexOf('L')-1 && (answer.includes('X') && answer.includes('L'))) {
                countSum -= 20;
            } 

            if (answer.indexOf('C') === answer.indexOf('M')-1 && (answer.includes('C') && answer.includes('M'))) {
                countSum -= 200;
            } 
        
            alert('The roman numeral equivilant of your number is: ' + countSum );
        }
        function regNum(answer) {

        
            let thousand = 'M';
            let fiveHundred = 'D';
            let hundred = 'C';
            let mAnswer='';
            let dAnswer='';
            
            
            if (answer.length >= 4) {
                subtractM();
            } 

            function subtractM() {
                countM = parseInt(answer/1000);
                withoutM = answer - countM * 1000;
                console.log(withoutM.toString());
                console.log(countM);
                addM();
                
                if ( withoutM.toString().length == 3 && withoutM.toString() >= 500 ){
                    console.log('above 500');
                    subtractD(withoutM);
                };
                if (withoutM.toString().length === 3 && withoutM.toString() < 500){
                    console.log('below 500');
                    subtractC(withoutM);
                };
            }

            function subtractD(withoutM) {
                countD = parseInt(withoutM.toString()/500);
                withoutD = withoutM.toString() - countD * 500;
                console.log(withoutD.toString());
                console.log('subtractD worked')
            }

            function subtractC(withoutM) {
                countC = parseInt(withoutM.toString()/100);
                withoutC = withoutM.toString() - countC * 100;
                console.log(withoutC.toString());
                console.log('subtractC worked')
            }
            
            
            
            function addM(countM){
                if (countM){
                    mAnswer=thousand.repeat(countM.toString());
                }
            }

            function addD (countD){
                if (countD){
                    dAnswer=fiveHundred.repeat(countD.toString());
                }
            }
           
            
            let addedAnswers = mAnswer 
            
            
            

            alert('The equivilant of your roman numeral is: ' + addedAnswers);
        }
    </script>
</body>

</html>