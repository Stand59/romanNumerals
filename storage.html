<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Roman Numeral Challenge</title> 
</head>

<body>
    <h1>Roman Numeral Conversion</h1>
    <form>
        <label>Insert a roman numeral in the box and the equivilant number with be returned.</label><br><br>
        <input type="text" id="romAnswer" name="romAanswer"><br><br>
        <input type="submit" value="Submit" onclick="romanNum(document.getElementById('romAnswer').value)">
    </form><br>
    <form>
        <label>Insert a number in the box and the equivilant roman numeral with be returned.</label><br><br>
        <input type="text" id="numAnswer" name="numAnswer"><br><br>
        <input type="submit" value="Submit" onclick="regNum(document.getElementById('numAnswer').value)">
    </form>
    <script>
        function romanNum(answer) {
            let countI = (answer.match(/I/gi) || []).length;
            let countV = (answer.match(/V/gi) || []).length;
            let countX = (answer.match(/X/gi) || []).length;
            let countL = (answer.match(/L/gi) || []).length;
            let countC = (answer.match(/C/gi) || []).length;
            let countD = (answer.match(/D/gi) || []).length;
            let countM = (answer.match(/M/gi) || []).length;
            let countSum = countI * 1 + countV * 5 + countX * 10 + countL * 50 + countC * 100 + countD * 100 + countM * 1000;
            
            if (answer.indexOf('I') === answer.indexOf('V')-1 && (answer.includes('I') && answer.includes('V'))) {
                countSum -= 2;
            } 

            if (answer.indexOf('I') === answer.indexOf('X')-1 && (answer.includes('I') && answer.includes('X'))) {
                countSum -= 2;
            } 

            if (answer.indexOf('X') === answer.indexOf('C')-1 && (answer.includes('X') && answer.includes('C'))) {
                countSum -= 20;
            } 

            if (answer.indexOf('X') === answer.indexOf('L')-1 && (answer.includes('X') && answer.includes('L'))) {
                countSum -= 20;
            } 

            if (answer.indexOf('C') === answer.indexOf('M')-1 && (answer.includes('C') && answer.includes('M'))) {
                countSum -= 200;
            } 
        
            alert('The roman numeral equivilant of your number is: ' + countSum );
        }
        function regNum(answer) {
            let withoutM = 0;
            let withoutD = 0;
            let withoutC = 0;
            let withoutL = 0;
            let withoutX = 0;
            let withoutV = 0;
            let withoutI = 0;
            
            if (answer.length >= 4) {
                let countM = parseInt(answer/1000);
                let withoutM = answer - countM * 1000;
                console.log(withoutM);
                console.log(countM)
                if (withoutM.length === 3 && withoutM >= 500){
                    sinD(withoutM);
                }
                if (withoutM.length === 3 && withoutM < 500){
                    sinD(withoutM);
                }
                function sinD(){
                    let countD = parseInt(withoutM/500);
                    let withoutD = withoutM - countD * 500;
                    console.log(withoutD);
                }
            } 

            

            if (answer.length === 3 && answer >= 500) {
                let countD = parseInt(answer/500);
                let withoutD = answer - countD * 500;
                console.log(withoutD);
                sinD(withoutD);
            };


            if (answer.length === 3 && answer < 500) {
                let countC = parseInt(answer/100);
                let withoutC = answer - countC * 100;
                console.log(withoutC)
            }

            if (withoutD.length === 3 && withoutD < 500) {
                let countC = parseInt(withoutD/100);
                let withoutC = withoutD - countC * 100;
                console.log(withoutC)
            }

            if (answer.length === 2 && answer >= 50) {
                let countL = parseInt(answer/50);
                let withoutL = answer - countL * 50;
                console.log(withoutL)
            }

            if (withoutC.length === 2 && withoutC >= 50) {
                let countL = parseInt(withoutC/50);
                let withoutL = withoutC - countL * 50;
                console.log(withoutL)
            }
            
            if (answer.length === 2 && answer < 50) {
                let countX = parseInt(answer/10);
                let withoutX = answer - countX * 10;
                console.log(withoutX)
            }

            if (withoutL.length === 2 && withoutL < 50) {
                let countX = parseInt(withoutL/10);
                let withoutX = withoutL - countX * 10;
                console.log(withoutX)
            }

            if (answer.length === 1 && answer >= 5 ) {
                let countV = parseInt(answer/5);
                let withoutV = answer - countV * 5;
                console.log(withoutV)
            }

            if (withoutX.length === 2 && withoutX >= 5) {
                let countV = parseInt(withoutX/5);
                let withoutV = withoutX - countV * 5;
                console.log(withoutV)
            }

            if (answer.length === 1 && answer < 5 ) {
                let countI = parseInt(answer/1);
                let withoutI = answer - countI * 1;
                console.log(withoutI)
            }

            if (withoutI.length === 2 && withoutI < 5) {
                let countI = parseInt(withoutI/1);
                let withoutI = withoutX - countI * 1;
                console.log(withoutI)
            }

            alert('The equivilant of your roman numeral is: ' + answer);
        }
    </script>
</body>

</html>